
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Third party modules &#8212; Start Now!</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.1/css/all.min.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.1/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.1/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.1/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=384b581d" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae" />
  <script src="../_static/vendor/fontawesome/6.5.1/js/all.min.js?digest=8d27b9dea8ad943066ae"></script>

    <script src="../_static/documentation_options.js?v=d7d8fdfe"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=efea14e4"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'project-development/third_party';</script>
    <link rel="icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Documentation" href="../documentation/index.html" />
    <link rel="prev" title="Modules" href="modules.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a id="pst-skip-link" class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <header class="bd-header navbar navbar-expand-lg bd-navbar">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/logo.png" class="logo__image only-light" alt="Start Now! - Home"/>
    <script>document.write(`<img src="../_static/logo.png" class="logo__image only-dark" alt="Start Now! - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <ul class="current nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../getting-started/index.html">Get Started</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/devenv.html">Development environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/get-the-code.html">Get the code</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/structure.html">Understand the project structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/useful-commands.html">Know the useful commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/customizing.html">Make it your own</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/get-updates.html">Get updates</a></li>
</ul>
</li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="index.html">Developer Guides</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-2"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="build.html">Build instructions</a></li>
<li class="toctree-l2"><a class="reference internal" href="devflow.html">Development Process</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules.html">Modules</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">Third party modules</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../documentation/index.html">Documentation</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-3"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../documentation/doxygen-doc.html">Documenting code</a></li>
<li class="toctree-l2"><a class="reference internal" href="../documentation/sphinx-doc.html">Sphinx and restructured text</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../tools/index.html">Project Tools</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-4"><i class="fa-solid fa-chevron-down"></i></label><ul class="simple">
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../version.html">Version</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/abdes/asap" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/abdes/asap/issues/new?title=Issue%20on%20page%20%2Fproject-development/third_party.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/project-development/third_party.rst" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.rst</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Third party modules</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#cmake-externalproject">CMake ExternalProject</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#cmake-fetchcontent">CMake FetchContent</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">CPM</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#git-submodules">Git submodules</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#git-configuration">Git configuration</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#adding-a-git-submodule">Adding a git submodule</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#grabbing-updates">Grabbing updates</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#deleting-git-submodules">Deleting git submodules</a></li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="third-party-modules">
<h1>Third party modules<a class="headerlink" href="#third-party-modules" title="Link to this heading">#</a></h1>
<p>Last Updated on 2024-01-29</p>
<p>The <cite>asap</cite> project fully leverage the open source development model by allowing
to easily add third party libraries. We want to increase reuse of existing
software but not at the cost of adding unnecessary complexity to the build
environment.</p>
<p>C++ does not provide any built-in package management mechanism like what we can
find in <a class="reference external" href="https://doc.rust-lang.org/cargo/">Rust</a> or <a class="reference external" href="https://go.dev/doc/modules/managing-dependencies">Go</a>.</p>
<p>Over time, many workaround were used to deal with this gap, including git
submodules, independent package managers such as <a class="reference external" href="https://conan.io/">conan</a>,
or even copying the third party code or binaries into the project.</p>
<p>If we want to have any level of real dependency management, we’ll need some kind
of package management. But then, the package manager itself becomes a
dependency. Everyone that wants to build our project has to install the correct
version. If you’re using CI, you have to set up everything on the build server
as well, which can be a pain.</p>
<p>It would be nice if we can achieve our goals with just CMake, and that’s what
we’re gonna do. We’ll go through at least 3 methods of integrating third party
libraries/modules.</p>
<section id="cmake-externalproject">
<h2>CMake ExternalProject<a class="headerlink" href="#cmake-externalproject" title="Link to this heading">#</a></h2>
<p>CMake introduced a module called ExternalProject in version 3.0. ExternalProject
wraps dependencies into a CMake target and allows managing foreign code from
your CMakeLists.txt.</p>
<p>To use it, one must add a target via ExternalProject_Add(). CMake will then run
the following steps for this target:</p>
<dl class="field-list simple">
<dt class="field-odd">DOWNLOAD<span class="colon">:</span></dt>
<dd class="field-odd"><p>Download the dependency. Here one can use a version control system or
download from an URL.</p>
</dd>
<dt class="field-even">UPDATE<span class="colon">:</span></dt>
<dd class="field-even"><p>Update the downloaded code if anything changed since the last CMake
run.</p>
</dd>
<dt class="field-odd">CONFIGURE<span class="colon">:</span></dt>
<dd class="field-odd"><p>Configure the project code.</p>
</dd>
<dt class="field-even">BUILD<span class="colon">:</span></dt>
<dd class="field-even"><p>Build the dependencies code.</p>
</dd>
<dt class="field-odd">INSTALL<span class="colon">:</span></dt>
<dd class="field-odd"><p>Install the built code into a specified directory.</p>
</dd>
<dt class="field-even">TEST<span class="colon">:</span></dt>
<dd class="field-even"><p>(optional) Run tests.</p>
</dd>
</dl>
<p>All the above commands are configurable. ExternalProject also allows for custom
steps. For more information, have a look at the <a class="reference external" href="https://cmake.org/cmake/help/latest/module/ExternalProject.html">documentation</a>.</p>
<p>This definitely works with one small issue: when using ExternalProject, all its
steps will run at build time. This means that CMake downloads and builds your
dependencies after the generation step. So your dependencies will not be
available yet when CMake configures your project. If this is acceptable, then
<cite>ExternalProject</cite> is a go.</p>
</section>
<section id="cmake-fetchcontent">
<h2>CMake FetchContent<a class="headerlink" href="#cmake-fetchcontent" title="Link to this heading">#</a></h2>
<p>With version 3.11 CMake introduced a new module: <a class="reference external" href="https://cmake.org/cmake/help/latest/module/FetchContent.html">FetchContent</a>. The module
offers the same functionality as ExternalProject but will download dependencies
before the configure step.</p>
<p>Here is an example of how to use it to fetch, configure, build and make
available the Google Test libraries in the project.</p>
<div class="highlight-CMake notranslate"><div class="highlight"><pre><span></span><span class="nb">include</span><span class="p">(</span><span class="s">FetchContent</span><span class="p">)</span>
<span class="c"># We make sure that we have &#39;thirdparty&#39; in the name so that the targets get</span>
<span class="c"># excluded from the generated target lists for the various tools.</span>
<span class="nb">set</span><span class="p">(</span><span class="s">FETCHCONTENT_BASE_DIR</span><span class="w"> </span><span class="o">${</span><span class="nv">CMAKE_BINARY_DIR</span><span class="o">}</span><span class="s">/third_party_deps</span><span class="p">)</span>
<span class="nb">FetchContent_Declare</span><span class="p">(</span>
<span class="w">  </span><span class="s">googletest</span>
<span class="w">  </span><span class="s">GIT_REPOSITORY</span><span class="w"> </span><span class="s">https://github.com/google/googletest.git</span>
<span class="w">  </span><span class="s">GIT_TAG</span><span class="w"> </span><span class="c"># GoogleTest now follows the Abseil Live at Head philosophy. We</span>
<span class="w">          </span><span class="c"># recommend using the latest commit in the main branch in your</span>
<span class="w">          </span><span class="c"># projects.</span>
<span class="w">  </span><span class="s">origin/main</span><span class="p">)</span>
<span class="c"># For Windows: Prevent overriding the parent project&#39;s compiler/linker settings</span>
<span class="nb">set</span><span class="p">(</span><span class="s">gtest_force_shared_crt</span>
<span class="w">    </span><span class="s">ON</span>
<span class="w">    </span><span class="s">CACHE</span><span class="w"> </span><span class="s">BOOL</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="w"> </span><span class="s">FORCE</span><span class="p">)</span>
<span class="nb">FetchContent_MakeAvailable</span><span class="p">(</span><span class="s">googletest</span><span class="p">)</span>
</pre></div>
</div>
<p><cite>FetchContent</cite> works very well but there are a couple of things to keep in mind
when using it:</p>
<ul class="simple">
<li><p><strong>Downloading requires an internet connection</strong>
Of course, you have to be online for first downloading your dependencies.
Compared to using git submodules, this requirement is now hidden. So you might
forget about it when building your code. To mitigate this problem, there are
options we can use:</p>
<ul>
<li><p><cite>FETCHCONTENT_FULLY_DISCONNECTED=ON</cite> will skip the DOWNLOAD and UPDATE steps</p></li>
<li><p><cite>FETCHCONTENT_UPDATES_DISCONNECTED=ON</cite> will skip the UPDATE step</p></li>
</ul>
</li>
<li><p><strong>The library has to be installable</strong>
Every once in a while you will come across libraries that are missing the call
to install() in their CMakeLists.txt. In this case, FetchContent does not know
how to copy the built code into the install folder and will fail.</p></li>
</ul>
<p>FetchContent works best with CMake based dependencies. I haven’t had a chance to
test it with libraries that are not built with CMake. But I would expect that
some extra configuration is necessary to make it work.</p>
</section>
<section id="id1">
<h2><a class="reference external" href="https://github.com/TheLartians/CPM.cmake">CPM</a><a class="headerlink" href="#id1" title="Link to this heading">#</a></h2>
<p>CPM.cmake is a cross-platform CMake script that adds dependency management
capabilities to CMake. It’s built as a thin wrapper around CMake’s FetchContent
module that adds version control, caching, a simple API and more.</p>
<div class="margin admonition hint">
<p class="admonition-title">Hint</p>
<p>CPM is the preferred way of managing third party dependencies in asap, and is
already integrated in the project.</p>
</div>
</section>
<section id="git-submodules">
<h2>Git submodules<a class="headerlink" href="#git-submodules" title="Link to this heading">#</a></h2>
<p>For dependencies with a modern CMake setup, this is enough to make it available
to your project. Several of the third party dependencies used in <cite>asap</cite> are
integrated this way. It’s very simple to integrate in the master project
CMakeLists.txt, just like adding a regular module in a subdirectory.</p>
<div class="highlight-CMake notranslate"><div class="highlight"><pre><span></span><span class="c"># ---------------------------------------------</span>
<span class="c"># Third party modules</span>
<span class="c"># ---------------------------------------------</span>

<span class="nb">add_subdirectory</span><span class="p">(</span><span class="s">third_party</span><span class="p">)</span>
</pre></div>
</div>
<p>To keep third party modules configuration in a single place, all modules are
located under the <code class="docutils literal notranslate"><span class="pre">`third_party`</span></code> subdirectory. That directory has a
<cite>CMakeLists.txt</cite> file which only contains configuration for third party modules
before they are included. Here is an example for <cite>spdlog</cite>:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp"># -------------------------------------------------------</span>
<span class="cp"># spdlog</span>
<span class="cp"># -------------------------------------------------------</span>

<span class="cp"># We want the spdlog install target to be generated even</span>
<span class="cp"># though we are using it as a submodule. The reason for</span>
<span class="cp"># that is that we want our project to be self contained</span>
<span class="cp"># with all dependencies included.</span>
<span class="n">set</span><span class="p">(</span><span class="n">SPDLOG_INSTALL</span>
<span class="w">    </span><span class="n">ON</span>
<span class="w">    </span><span class="n">CACHE</span><span class="w"> </span><span class="n">BOOL</span><span class="w"> </span><span class="s">&quot;Generate the spdlog install target&quot;</span><span class="p">)</span>

<span class="n">set</span><span class="p">(</span><span class="n">SPDLOG_FMT_EXTERNAL</span>
<span class="w">    </span><span class="n">ON</span>
<span class="w">    </span><span class="n">CACHE</span><span class="w"> </span><span class="n">BOOL</span><span class="w"> </span><span class="s">&quot;Use external fmt library instead of bundled&quot;</span><span class="p">)</span>

<span class="k">if</span><span class="p">(</span><span class="n">WIN32</span><span class="p">)</span>
<span class="w">  </span><span class="n">set</span><span class="p">(</span><span class="n">SPDLOG_WCHAR_SUPPORT</span>
<span class="w">      </span><span class="n">ON</span>
<span class="w">      </span><span class="n">CACHE</span><span class="w"> </span><span class="n">BOOL</span><span class="w"> </span><span class="s">&quot;Support wchar api&quot;</span><span class="p">)</span>
<span class="w">  </span><span class="n">set</span><span class="p">(</span><span class="n">SPDLOG_WCHAR_FILENAMES</span>
<span class="w">      </span><span class="n">ON</span>
<span class="w">      </span><span class="n">CACHE</span><span class="w"> </span><span class="n">BOOL</span><span class="w"> </span><span class="s">&quot;Support wchar filenames&quot;</span><span class="p">)</span>
<span class="n">endif</span><span class="p">()</span>

<span class="n">add_subdirectory</span><span class="p">(</span><span class="n">spdlog</span><span class="p">)</span>
</pre></div>
</div>
<p>This approach also works well and is the preferred approach for modules that use
CMake as their build system. It does however require some familiarity with git
submodules.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Visit the <a class="reference external" href="https://git.wiki.kernel.org/index.php/GitSubmoduleTutorial">Git Submodule Tutorial</a>.</p>
</div>
<section id="git-configuration">
<h3>Git configuration<a class="headerlink" href="#git-configuration" title="Link to this heading">#</a></h3>
<p>To make the work with git submodules more reliable, it is strongly recommended
to have the following git configuration setup:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><style type="text/css">
span.prompt1:before {
  content: "$ ";
}
</style><span class="prompt1">git config --global diff.submodule log</span>
<span class="prompt1">git config --global status.submoduleSummary true</span>
</pre></div></div></section>
<section id="adding-a-git-submodule">
<h3>Adding a git submodule<a class="headerlink" href="#adding-a-git-submodule" title="Link to this heading">#</a></h3>
<p>Adding submodules is easy:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span class="prompt1">git submodule add https://github.com/gabime/spdlog.git</span>
</pre></div></div><p>This will have created a .gitmodules in the project directory if none already
exists. Future cloning of the project will automatically add the submodules
while fetching the project repo.</p>
<p>By default, submodules will add the sub-project into a directory named the same
as the repository, in this case <cite>spdlog</cite>. You can add a different path at the
end of the command if you want it to go elsewhere.</p>
<p>Finally we can commit the changes.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span class="prompt1">git commit -m &quot;Added submodules&quot;</span>
</pre></div></div></section>
<section id="grabbing-updates">
<h3>Grabbing updates<a class="headerlink" href="#grabbing-updates" title="Link to this heading">#</a></h3>
<p>When pulling updates from the container repo’s remote, Git auto-fetches, but
does not auto-update. The local cache is up-to-date with the submodule’s remote,
but the submodule’s working directory stays with its former contents. Although
this auto-fetching is limited to already-known submodules: any new ones, not yet
copied into local configuration, are not auto-fetched.</p>
<p>If you don’t explicitly update the submodule’s working directory, your next
container commit will regress the submodule. Is is therefore mandatory that you
finalize the update.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span class="prompt1">git pull</span>
<span class="prompt1">git submodule sync --recursive</span>
<span class="prompt1">git submodule update --init --recursive</span>
</pre></div></div></section>
<section id="deleting-git-submodules">
<h3>Deleting git submodules<a class="headerlink" href="#deleting-git-submodules" title="Link to this heading">#</a></h3>
<p>To remove a submodule you need to:</p>
<ol class="arabic">
<li><p>Delete the relevant section from the <cite>.gitmodules</cite> file.</p></li>
<li><p>Stage the .gitmodules changes:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span class="prompt1">git add .gitmodules</span>
</pre></div></div></li>
<li><p>Delete the relevant section from <cite>.git/config</cite>.</p></li>
<li><p>Remove the submodule files from the working tree and index:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span class="prompt1">git rm --cached path_to_submodule (no trailing slash).</span>
</pre></div></div></li>
<li><p>Remove the submodule’s <cite>.git</cite> directory:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span class="prompt1">rm -rf .git/modules/path_to_submodule</span>
</pre></div></div></li>
<li><p>Commit the changes:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span class="prompt1">git commit -m &quot;Removed submodule &lt;name&gt;&quot;</span>
</pre></div></div></li>
<li><p>Delete the now untracked submodule files:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span class="prompt1">rm -rf path_to_submodule</span>
</pre></div></div></li>
</ol>
</section>
</section>
</section>


                </article>
              

              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="modules.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Modules</p>
      </div>
    </a>
    <a class="right-next"
       href="../documentation/index.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Documentation</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#cmake-externalproject">CMake ExternalProject</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#cmake-fetchcontent">CMake FetchContent</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">CPM</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#git-submodules">Git submodules</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#git-configuration">Git configuration</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#adding-a-git-submodule">Adding a git submodule</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#grabbing-updates">Grabbing updates</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#deleting-git-submodules">Deleting git submodules</a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2022, The Authors.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>